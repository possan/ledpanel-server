<html>
<head>
<title>Shader</title>
<link rel="stylesheet" href="toyrunner.min.css" />
</head>
<body>
<canvas id="canvas" width="100%" height="100%"></canvas>
<script src="toyrunner.min.js" type="text/javascript"></script>
<div id="errormessage"></div>
<script id="2d-vertex-shader" type="x-shader/x-vertex">

precision mediump float;
attribute vec2 position;

void main() {
  gl_Position = vec4(position.x, position.y, 0, 1);
}

</script>
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;





#define S sin(p.z*.2)*vec4(1,2,0,0)
void mainImage( out vec4 fragColor, in vec2 fragCoord ) {
    vec4 p = vec4(fragCoord,0.,1.)/iResolution.xyxy-.5, d=p, t;
    p.z += iGlobalTime*4.;
    p -= S;
    for(float i=2.; i>0.; i-=.01)
    {
        t = abs(mod(p + S, 8.)-4.);
        t = min(t.x, t.y)-textureCube(iChannel0,t.zxy-3.); 
        fragColor = p.wxxw*.02+i/p.w;
        if(t.x<.01) break;
        p -= d*t.x*.2;
     }
}

</script>
<script type="text/javascript">

window.addEventListener('load', initDefaultPlayer);

</script>
</body>
</html>