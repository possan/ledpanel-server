<html>
<head>
<title>Shader</title>
<link rel="stylesheet" href="toyrunner.min.css" />
</head>
<body>
<canvas id="canvas" width="100%" height="100%"></canvas>
<script src="toyrunner.min.js" type="text/javascript"></script>
<div id="errormessage"></div>
<script id="2d-vertex-shader" type="x-shader/x-vertex">

precision mediump float;
attribute vec2 position;

void main() {
  gl_Position = vec4(position.x, position.y, 0, 1);
}

</script>
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D texture;

uniform vec2 resolution;

uniform float time;
uniform vec2 mouse;

float pixelsize = 8.0;

vec2 mp = vec2(0.5, 0.5);

vec4 backgroundPixel(int x, int y) {
	return vec4(
		0.0,
		1.0,
		0.0,
		1.0);
}

//
// Mouse pointer
//
// 11__ ____ __
// 101_ ____ __
// 1001 ____ __
// 1000 1___ __
// 1000 01__ __
// 1000 001_ __
// 1000 0001 __
// 1000 0000 1_
// 1000 0111 11
// 1001 001_ __
// 101_ 1001 __
// 11__ 1001 __
// 1___ _101 __
// ____ _100 1_
// ____ __11 1_
//

vec4 c1 = vec4(0.0, 0.0, 0.0, 1.0);
vec4 c0 = vec4(1.0, 1.0, 1.0, 1.0);

vec4 mouseSprite(int lx, int ly, vec4 bg) {
  if (ly == 0) {
    if (lx == 0 || lx == 1) return c1;
  }
  if (ly == 1) {
    if (lx == 0 || lx == 2) return c1;
    if (lx == 1) return c0;
  }
  if (ly == 2) {
    if (lx == 0 || lx == 3) return c1;
    if (lx == 1 || lx == 2) return c0;
  }
  if (ly == 3) {
    if (lx == 0 || lx == 4) return c1;
    if (lx == 1 || lx == 2 || lx == 3) return c0;
  }
  if (ly == 4) {
    if (lx == 0 || lx == 5) return c1;
    if (lx == 1 || lx == 2 || lx == 3 || lx == 4) return c0;
  }
  if (ly == 5) {
    if (lx == 0 || lx == 6) return c1;
    if (lx == 1 || lx == 2 || lx == 3 || lx == 4 || lx == 5) return c0;
  }
  if (ly == 6) {
    if (lx == 0 || lx == 7) return c1;
    if (lx == 1 || lx == 2 || lx == 3 || lx == 4 || lx == 5 || lx == 6) return c0;
  }
  if (ly == 7) {
    if (lx == 0 || lx == 8) return c1;
    if (lx == 1 || lx == 2 || lx == 3 || lx == 4 || lx == 5 || lx == 6 || lx == 7) return c0;
  }
  if (ly == 8) {
    if (lx == 0 || lx == 5 || lx == 6 || lx == 7 || lx == 8 || lx == 9) return c1;
    if (lx == 1 || lx == 2 || lx == 3 || lx == 4) return c0;
  }
  if (ly == 9) {
    if (lx == 0 || lx == 3 || lx == 6) return c1;
    if (lx == 1 || lx == 2 || lx == 4 || lx == 5) return c0;
  }
  if (ly == 10) {
    if (lx == 0 || lx == 2 || lx == 4 || lx == 7) return c1;
    if (lx == 1 || lx == 5 || lx == 6) return c0;
  }
  if (ly == 11) {
    if (lx == 0 || lx == 1 || lx == 4 || lx == 7) return c1;
    if (lx == 5 || lx == 6) return c0;
  }
  if (ly == 12) {
    if (lx == 0 || lx == 5 || lx == 8) return c1;
    if (lx == 6 || lx == 7) return c0;
  }
  if (ly == 13) {
    if (lx == 5 || lx == 8) return c1;
    if (lx == 6 || lx == 7) return c0;
  }
  if (ly == 14) {
    if (lx == 6 || lx == 7 || lx == 8) return c1;
  }
  return bg;
}

void main() {
	mp = vec2(mouse.x, 1.0 - mouse.y);
	mp = mp * resolution.xy / pixelsize;

	vec2 p = gl_FragCoord.xy; // / resolution.xy;
	int px = int(p.x / pixelsize);
	int py = int(p.y / pixelsize);

	int localmousex = px - int(mp.x);
	int localmousey = -(py - int(mp.y));

	vec4 bg = backgroundPixel(px, py);
	gl_FragColor = mouseSprite(localmousex, localmousey, bg);

}

/*
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{

    mp = vec2(iMouse.x, iMouse.y);
	mp = mp / pixelsize;

	vec2 p = fragCoord.xy; // / resolution.xy;
	int px = int(p.x / pixelsize);
	int py = int(p.y / pixelsize);

	int localmousex = px - int(mp.x);
	int localmousey = -(py - int(mp.y));

	vec4 bg = backgroundPixel(px, py);
	fragColor = mouseSprite(localmousex, localmousey, bg);
}
*/


// uniform vec3      iResolution;           // viewport resolution (in pixels)
// uniform float     iGlobalTime;           // shader playback time (in seconds)
// uniform float     iChannelTime[4];       // channel playback time (in seconds)
// uniform vec3      iChannelResolution[4]; // channel resolution (in pixels)
// uniform vec4      iMouse;                // mouse pixel coords. xy: current (if MLB down), zw: click
// uniform samplerXX iChannel0..3;          // input channel. XX = 2D/Cube
// uniform vec4      iDate;                 // (year, month, day, time in seconds)
// uniform float     iSampleRate;           // sound sample rate (i.e., 44100)


</script>
<script type="text/javascript">

window.addEventListener('load', initDefaultPlayer);

</script>
</body>
</html>